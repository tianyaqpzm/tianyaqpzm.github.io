











### 堵塞队列

当队列中没有元素时，对这个队列的弹出操作将会被阻塞，直到有元素被插入时才会被唤醒；当队列已满时，对这个队列的插入操作就会被阻塞，直到有元素被弹出后才会被唤醒。

先进先出



| 方法     | 抛出异常 | 返回特殊值 | 一直阻塞 | 超时退出    |
| -------- | -------- | ---------- | -------- | ----------- |
| 插入方法 | add      | offer      | put      | Offer(time) |
| 移除方法 | remove   | poll       | take     | Poll(time)  |
| 检查方法 | element  | peek       | N/A      | N/A         |

**抛出异常**：当队列满时，如果再往队列里插入元素，会抛出IllegalStateException（“Queuefull”）异常。当队列空时，从队列里获取元素会抛出NoSuchElementException异常。
**返回特殊值**：当往队列插入元素时，会返回元素是否插入成功，成功返回true。如果是移除方法，则是从队列里取出一个元素，如果没有则返回null。
**一直阻塞**：当阻塞队列满时，如果生产者线程往队列里put元素，队列会一直阻塞生产者线程，直到队列可用或者响应中断退出。当队列空时，如果消费者线程从队列里take元素，队列会阻塞住消费者线程，直到队列不为空。
**超时退出**：当阻塞队列满时，如果生产者线程往队列里插入元素，队列会阻塞生产者线程一段时间，如果超过了指定的时间，生产者线程就会退出。





比如常用的线程池类`ThreadPoolExecutor`内部就使用了阻塞队列来保存等待被处理的任务



## 手写阻塞队列

https://zhuanlan.zhihu.com/p/64156753

com.pei.learn.basic.queue.T00_06_BlockQueue













